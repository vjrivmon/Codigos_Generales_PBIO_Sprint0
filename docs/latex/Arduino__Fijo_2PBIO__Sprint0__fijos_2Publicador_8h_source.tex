\hypertarget{Arduino__Fijo_2PBIO__Sprint0__fijos_2Publicador_8h_source}{}\doxysection{Publicador.\+h}
\label{Arduino__Fijo_2PBIO__Sprint0__fijos_2Publicador_8h_source}\index{Arduino\_Fijo/PBIO\_Sprint0\_fijos/Publicador.h@{Arduino\_Fijo/PBIO\_Sprint0\_fijos/Publicador.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{// -\/*-\/ mode: c++ -\/*-\/}}
\DoxyCodeLine{2 }
\DoxyCodeLine{3 \textcolor{comment}{// -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{4 \textcolor{comment}{// Jordi Bataller i Mascarell}}
\DoxyCodeLine{5 \textcolor{comment}{// -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{6 }
\DoxyCodeLine{7 \textcolor{preprocessor}{\#ifndef PUBLICADOR\_H\_INCLUIDO}}
\DoxyCodeLine{8 \textcolor{preprocessor}{\#define PUBLICADOR\_H\_INCLUIDO}}
\DoxyCodeLine{9 }
\DoxyCodeLine{10 \textcolor{comment}{// -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{11 \textcolor{comment}{// -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{12 \textcolor{keyword}{class }\mbox{\hyperlink{classPublicador}{Publicador}} \{}
\DoxyCodeLine{13 }
\DoxyCodeLine{14   \textcolor{comment}{// ............................................................}}
\DoxyCodeLine{15   \textcolor{comment}{// ............................................................}}
\DoxyCodeLine{16 \textcolor{keyword}{private}:}
\DoxyCodeLine{17 }
\DoxyCodeLine{18   \textcolor{comment}{/*uint8\_t beaconUUID[16] = \{ //UUID del Beacon // -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ CAMBIAR}}
\DoxyCodeLine{19 \textcolor{comment}{    'E', 'P', 'S', 'G', '-\/', 'G', 'T', 'I', }}
\DoxyCodeLine{20 \textcolor{comment}{    '-\/', 'P', 'R', 'O', 'Y', '-\/', '3', 'A'}}
\DoxyCodeLine{21 \textcolor{comment}{    \};*/}}
\DoxyCodeLine{22 }
\DoxyCodeLine{23 uint8\_t beaconUUID[16] = \{ \textcolor{comment}{//UUID del Beacon // -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ CAMBIAR}}
\DoxyCodeLine{24   \textcolor{charliteral}{'E'}, \textcolor{charliteral}{'S'}, \textcolor{charliteral}{'T'}, \textcolor{charliteral}{'O'}, \textcolor{charliteral}{'-\/'}, \textcolor{charliteral}{'E'}, \textcolor{charliteral}{'S'}, \textcolor{charliteral}{'-\/'}, }
\DoxyCodeLine{25   \textcolor{charliteral}{'U'}, \textcolor{charliteral}{'N'}, \textcolor{charliteral}{'-\/'}, \textcolor{charliteral}{'T'}, \textcolor{charliteral}{'E'}, \textcolor{charliteral}{'X'}, \textcolor{charliteral}{'T'}, \textcolor{charliteral}{'O'}}
\DoxyCodeLine{26   \};}
\DoxyCodeLine{27   }
\DoxyCodeLine{28 }
\DoxyCodeLine{29   \textcolor{comment}{// ............................................................}}
\DoxyCodeLine{30   \textcolor{comment}{// ............................................................}}
\DoxyCodeLine{31 \textcolor{keyword}{public}:}
\DoxyCodeLine{32   \mbox{\hyperlink{classEmisoraBLE}{EmisoraBLE}} laEmisora \{}
\DoxyCodeLine{33     \textcolor{stringliteral}{"{}Manolito"{}}, \textcolor{comment}{//  nombre emisora   //Nombre que aparece como dispositivo en nRFConnect -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ CAMBIAR}}
\DoxyCodeLine{34       0x004c, \textcolor{comment}{// fabricanteID (Apple)}}
\DoxyCodeLine{35       4 \textcolor{comment}{// txPower}}
\DoxyCodeLine{36       \};}
\DoxyCodeLine{37   }
\DoxyCodeLine{38   \textcolor{keyword}{const} \textcolor{keywordtype}{int} RSSI = -\/53;}
\DoxyCodeLine{39 }
\DoxyCodeLine{40   \textcolor{comment}{// ............................................................}}
\DoxyCodeLine{41   \textcolor{comment}{// ............................................................}}
\DoxyCodeLine{42 \textcolor{keyword}{public}:}
\DoxyCodeLine{43 }
\DoxyCodeLine{44   \textcolor{comment}{// ............................................................}}
\DoxyCodeLine{45   \textcolor{comment}{// ............................................................}}
\DoxyCodeLine{46   \textcolor{keyword}{enum} MedicionesID  \{  \textcolor{comment}{// -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ CAMBIAR}}
\DoxyCodeLine{47     CO2 = 11,}
\DoxyCodeLine{48     \};}
\DoxyCodeLine{49 }
\DoxyCodeLine{50   \textcolor{comment}{// ............................................................}}
\DoxyCodeLine{51   \textcolor{comment}{// ............................................................}}
\DoxyCodeLine{52   \mbox{\hyperlink{classPublicador}{Publicador}}( ) \{}
\DoxyCodeLine{53     \textcolor{comment}{// ATENCION: no hacerlo aquí. (*this).laEmisora.encenderEmisora();}}
\DoxyCodeLine{54     \textcolor{comment}{// Pondremos un método para llamarlo desde el setup() más tarde}}
\DoxyCodeLine{55   \} \textcolor{comment}{// ()}}
\DoxyCodeLine{56 }
\DoxyCodeLine{57   \textcolor{comment}{// ............................................................}}
\DoxyCodeLine{58   \textcolor{comment}{// ............................................................}}
\DoxyCodeLine{59   \textcolor{keywordtype}{void} encenderEmisora() \{}
\DoxyCodeLine{60     (*this).laEmisora.encenderEmisora();}
\DoxyCodeLine{61   \} \textcolor{comment}{// ()}}
\DoxyCodeLine{62 }
\DoxyCodeLine{63   \textcolor{comment}{// ............................................................}}
\DoxyCodeLine{64   \textcolor{comment}{// ............................................................}}
\DoxyCodeLine{65   \textcolor{keywordtype}{void} publicarCO2( int16\_t valorCO2, uint8\_t contador, \textcolor{keywordtype}{long} tiempoEspera ) \{}
\DoxyCodeLine{66 }
\DoxyCodeLine{67     \textcolor{comment}{//}}
\DoxyCodeLine{68     \textcolor{comment}{// 1. empezamos anuncio}}
\DoxyCodeLine{69     \textcolor{comment}{//}}
\DoxyCodeLine{70     uint16\_t major = (MedicionesID::CO2 << 8) + contador;}
\DoxyCodeLine{71     (*this).laEmisora.emitirAnuncioIBeacon( (*this).beaconUUID, }
\DoxyCodeLine{72                                             major,}
\DoxyCodeLine{73                                             valorCO2, \textcolor{comment}{// minor}}
\DoxyCodeLine{74                                             (*this).RSSI \textcolor{comment}{// rssi}}
\DoxyCodeLine{75                                     );}
\DoxyCodeLine{76 }
\DoxyCodeLine{77     \textcolor{comment}{/*}}
\DoxyCodeLine{78 \textcolor{comment}{    Globales::elPuerto.escribir( "{}   publicarCO2(): valor="{} );}}
\DoxyCodeLine{79 \textcolor{comment}{    Globales::elPuerto.escribir( valorCO2 );}}
\DoxyCodeLine{80 \textcolor{comment}{    Globales::elPuerto.escribir( "{}   contador="{} );}}
\DoxyCodeLine{81 \textcolor{comment}{    Globales::elPuerto.escribir( contador );}}
\DoxyCodeLine{82 \textcolor{comment}{    Globales::elPuerto.escribir( "{}   todo="{}  );}}
\DoxyCodeLine{83 \textcolor{comment}{    Globales::elPuerto.escribir( major );}}
\DoxyCodeLine{84 \textcolor{comment}{    Globales::elPuerto.escribir( "{}\(\backslash\)n"{} );}}
\DoxyCodeLine{85 \textcolor{comment}{    */}}
\DoxyCodeLine{86 }
\DoxyCodeLine{87     \textcolor{comment}{//}}
\DoxyCodeLine{88     \textcolor{comment}{// 2. esperamos el tiempo que nos digan}}
\DoxyCodeLine{89     \textcolor{comment}{//}}
\DoxyCodeLine{90     esperar( tiempoEspera );}
\DoxyCodeLine{91 }
\DoxyCodeLine{92     \textcolor{comment}{//}}
\DoxyCodeLine{93     \textcolor{comment}{// 3. paramos anuncio}}
\DoxyCodeLine{94     \textcolor{comment}{//}}
\DoxyCodeLine{95     (*this).laEmisora.detenerAnuncio();}
\DoxyCodeLine{96   \} \textcolor{comment}{// ()}}
\DoxyCodeLine{97 }
\DoxyCodeLine{98  }
\DoxyCodeLine{99 \}; \textcolor{comment}{// class}}
\DoxyCodeLine{100 }
\DoxyCodeLine{101 \textcolor{comment}{// -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{102 \textcolor{comment}{// -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{103 \textcolor{comment}{// -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{104 \textcolor{comment}{// -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{105 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
