<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Enlaza tu nuevo dispositivo | VIMYP</title>
    <link rel="stylesheet" href="../style/styles.css">
    <link rel="stylesheet" href="../style/popupCerrarSesion.css">
    <link rel="stylesheet" href="../style/qr.css"> <!-- Archivo CSS específico para FAQ -->
    <link rel="icon" href="../img/logo.svg" type="image/x-icon"> <!-- Poner el icono de la web-->
</head>
<body>
     <!-- Header -->
     <header>
        <nav class="navbar">
            <div class="logo">
                <a href="../index.html">
                    <img src="../img/logo.svg" alt="Logotipo VIMYP" />
                    <span>VIMYP</span>
                </a>
            </div>
            <ul class="nav-links">
                <li><a href="packs.html">Packs</a></li>
                <li><a href="faq.html">FAQ</a></li>
                <li><a href="nosotros.html">Nosotros</a></li>
                <li><a href="infoExtra.html">Info sobre los gases</a></li>
                <li><a href="datosYMapa.html">Mapa</a></li>
                <li><a href="perfil.html">Mi perfil</a></li>
            </ul>
            <div class="nav-buttons">
                <a class="btn btn-primary" id="logoutBtn">Cerrar sesión</a>
                <div class="menu-toggle" id="mobile-menu">
                    <span class="bar"></span>
                    <span class="bar"></span>
                    <span class="bar"></span>
                </div>
            </div>
        </nav>
    </header>


      <!-- Sección del qr -->
       <section class="qr-section">
        <div class="text-qr">
            <h2>Enlaza tu nuevo dispositivo</h2>
            <p>Escanea el código QR o introduce el PIN que aparece en la tarjeta que viene junto al dispositivo a continuación o desde la app de VIMYP para dar de alta el dispositivo.</p>
            <p>Si no encuentras una tarjeta como la que se muestra a continuación, contacta con nosotros.</p>
            <div class="pin">
                <input type="tel" id="pinInput" placeholder="Escribe aquí tu PIN de 12 dígitos" maxlength="12" minlength="12">
                <button onclick="submitPin()" id="btn-submit-qr">Enviar</button>
            </div>
        </div>
        <div class="imgandsubmit-qr">
            <p>Tarjeta de ejemplo:</p>

            <div id="qrcode">
                <img id="tarjetaQR" alt="QR Code example" src="../img/tarjeta.png" />
            </div>    
        
          
        </div>
            
       </section>

    <!-- Footer -->
    <footer class="apple-footer">
        <div class="footer-top">
            <div class="footer-links">
                <ul>
                    <li><a href="politicaPrivacidad.html">Política de Privacidad</a></li>
                    <li><a href="condicionesDeUso.html">Condiciones de uso</a></li>
                    <li><a href="ventasYReembolsos.html">Ventas y Reembolsos</a></li>
                    <li><a href="avisosLegales.html">Avisos Legales</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>Copyright © 2024 VIMYP - Todos los derechos reservados.</p>
        </div>
    </footer>


     <!-- Popup para cerrar sesión -->
     <div id="popup-cerrar-sesion" class="popup">
        <div class="popup-content">
            <p>¿Seguro que quieres cerrar la sesión?</p>
            <button id="confirmBtn-cerrar" class="btn">Confirmar</button>
            <button id="cancelBtn-cerrar" class="btn">Cancelar</button>
        </div>
    </div>

    <script>
        const pinInput = document.getElementById("pinInput");
    
        // Permitir solo números y controlar el estilo del borde
        pinInput.addEventListener("input", () => {
            const pin = pinInput.value;
    
            // Elimina cualquier carácter que no sea un número
            pinInput.value = pin.replace(/\D/g, "");
    
            // Cambia el borde dependiendo de la longitud
            if (pinInput.value.length === 12) {
                pinInput.style.border = "2px solid green"; // Borde verde cuando hay 12 dígitos
            } else {
                //pinInput.style.border = ""; // Restaura el borde predeterminado si no tiene 12 dígitos
                pinInput.style.border = "2px solid red"; // Borde rojo si no es válido
            }
        });
    </script>

    <script>
            const botonEnviar = document.getElementById("btn-submit-qr");

// Evento al hacer clic en el botón "Enviar"
botonEnviar.addEventListener("click", () => {
        const pin = pinInput.value;

        // Validar si el PIN tiene exactamente 12 dígitos
        if (pin.length !== 12) {
            alert("El PIN debe tener exactamente 12 dígitos.");
            pinInput.style.border = "2px solid red"; // Borde rojo si no es válido
        } else {
            // Aquí puedes añadir el código para continuar con el envío si el PIN es válido
            alert("Dispositivo enlazado correctamente.");
        }
    });
    </script>
    
    

    <script src="../js/menu.js"></script> <!-- Archivo JS para que funcione el menú de hamburguesa -->
    <script src="../js/codigoQR.js"></script> <!-- Archivo JS para generar códigos QR -->
    <script src="../js/cerrarSesion.js"></script>
</body>
</html>
